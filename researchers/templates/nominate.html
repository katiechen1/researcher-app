{% extends "base.html" %}
{% load static %}

{% block header_styles %}
  <style>
    header.masthead {
      background-image: url({% static 'img/nominate-bg.jpg' %});
    }
  </style>
{% endblock %}

{% block content %}
<body onunload="clearCheckBoxes()">

<h2>Nominate Yourself or Someone Else</h2>

<p>Please complete the nomination form below. We are seeking research-focused nominees, including established industry professionals and Academics (Assistant, Associate, Full Professor, to Emerita rank). Please note: Each Nominee will be contacted after nomination via automated email to confirm nomination acceptance and inclusion on our Women in Microfluidics & BioMEMS list. We will let Nominees know who nominated them, but Nominator information will not be shared publicly.</p>
<form role="form" action="" method="post" id="form">
    {% csrf_token %}
    <!-- {{ form.as_p }} -->
    <table cellspacing="0">
	          
	    <tr>
		    <td><label for="Nominator"><b>Nominator</b></label></td>
	    </tr>	                    
	      <tr>
	      	<td><label for="nominators_full_name">Name:</label></td>
                    <td><input type="text" style = "margin-left:20px;" id="nominators_full_name" name="nominators_full_name" required></td>
                </tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
                <tr>
                    <td><label for="nominators_email">Email:</label></td>
                    <td><input type="email"  style = "margin-left:20px;" id="nominators_email" name="nominators_email" required></td>
                </tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
               
	      		<tr>
			<td><label style="margin-top:5px;">I am nominating myself: </label></td>
			<td><input style = "width:20px;height:20px;margin-left:20px;" id="checkbox" type="checkbox" name="check1" onclick="dynInput(this);"></td>
		</tr>


	              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
       
	      
	      
	      <tr>
                    <td><label class="nom" for="affiliation">Affiliation with Nominee:</label></td>
                    <td><input class="nom" type="text"  style = "margin-left:20px;" id="affiliation" name="affiliation" required></td>
                </tr>

              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
	      <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
	      <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
	      <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
	      <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
               <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
	      <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
	      
	      
	      	      
		<tr>
		
		    <td><label class= "nom" for="Nominee"><b>Nominee</b></label></td>
		</tr>		    
	      <tr>
	      	    <td><label class="nom" for="nominees_name">Name:</label></td>
                    <td><input class = "nom" type="text"  style = "margin-left:20px;" id="nominees_name" name="nominees_name" required></td>
                </tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
                <tr>
                    <td><label class = "nom" for="nominees_email">Email:</label></td>
                    <td><input class = "nom" type="email"  style = "margin-left:20px;" id="nominees_email" name="nominees_email" required></td>
                </tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
              <tr class="spacer"><td></td></tr>
	      

            </table>

        <input type="hidden" name="recaptcha_response" id="recaptchaResponse">
	<script>
		function clearCheckBoxes() {
		    var inputs = document.getElementsByTagName("input");
		        for (var i = 0; i < inputs.length; i++){
			        if (inputs[i].type === 'checkbox')
				            inputs[i].checked = false;
			}}
						</script>						

	<script>
	function dynInput(cbox) {
		var elements = document.getElementsByClassName("nom")
		for(var i=0; i<elements.length; i++) {
			var x = elements[i];
			if (cbox.checked) {
				if (x.tagName.toLowerCase() == "input"){
					x.required = false;
				}
				x.style.display="none";
			} else {
				if (x.tagName.toLowerCase() == "input"){
					x.required = true;
				}
				x.style.display="block";
			}}
		}

	</script>


	<script src="https://www.google.com/recaptcha/api.js?render=6Ldd-JoUAAAAAOaHiAwDMQuQMQY4_u8amHOmzw32"></script>

	<script>
	grecaptcha.ready(function() {
		grecaptcha.execute('6Ldd-JoUAAAAAOaHiAwDMQuQMQY4_u8amHOmzw32', {action:'nominate'})
			.then(function(token) {
				 var recaptchaResponse = document.getElementById('recaptchaResponse');
				                 recaptchaResponse.value = token;
						});
					});



	// Doing error handling on form submit won't work here because the validation blocks the submit event from firing.

//Get all the inputs...
const inputs = document.querySelectorAll('input, select, textarea');

// Loop through them...
for(let input of inputs) {
	  // Just before submit, the invalid event will fire, let's apply our class there.
	  input.addEventListener('invalid', (event) => {
		      input.classList.add('error');    
		        }, false);
	    
	    // Optional: Check validity onblur
	    input.addEventListener('blur', (event) => {
		        input.checkValidity();
			  })

}


	</script>

	<script>
	function fill() {
		    // DO STUFF...
		if (document.getElementById("checkbox").checked){
		document.getElementById("nominees_name").value = document.getElementById("nominators_full_name").value ;
		document.getElementById("nominees_email").value = document.getElementById("nominators_email").value ;
		document.getElementById("affiliation").value = "self" ;
		}
		return true; // return false to cancel form action
	}
	</script>
    <button type="submit" onclick="fill()">Submit</button>
</form>
</body>
{% endblock %}

